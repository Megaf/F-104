<?xml version="1.0" encoding="UTF-8"?>

<PropertyList>
  <name>electrical</name>
  <modal>false</modal>
  <layout>vbox</layout>

  <empty><stretch>true</stretch></empty>

  <empty><stretch>true</stretch></empty>
  <text>
    <label>Electrical system</label>
  </text>
  <empty><stretch>true</stretch></empty>


  <hrule/>

  <!-- Warning lights. TODO: make these multi-lined and require power! -->
  <group>
    <layout>hbox</layout>
    <default-padding>10</default-padding>

    <text>
      <visible>
        <not><property>/fdm/jsbsim/systems/electrical/GEN-3-output</property></not>
      </visible>
      <label>FIXED FREQ OUT</label>
    </text>
    <vrule/>
    <text>
      <visible>
        <not><property>/fdm/jsbsim/systems/electrical/GEN-1-output</property></not>
      </visible>
      <label>GENERATOR No. 1 OUT</label>
    </text>
    <vrule/>
    <text>
      <visible>
        <not><property>/fdm/jsbsim/systems/electrical/GEN-2-output</property></not>
      </visible>
      <label>GENERATOR No. 2 OUT</label>
    </text>
    <vrule/>
    <text>
      <visible>
        <not><property>/fdm/jsbsim/systems/electrical/PP1-powered</property></not>
      </visible>
      <label>DC PRIMARY BUS OUT</label>
    </text>
  </group>


  <hrule/>

  <!-- Controls -->
  <group>
    <layout>table</layout>
    <default-padding>10</default-padding>

    <button>
      <row>0</row>
      <col>0</col>
      <legend>ON</legend>
      <enable>
        <not><property>/fdm/jsbsim/systems/electrical/GEN-1-switch</property></not>
      </enable>
      <binding>
        <command>property-assign</command>
        <property>/fdm/jsbsim/systems/electrical/GEN-1-switch</property>
        <value>1</value>
      </binding>
    </button>

    <button>
      <row>0</row>
      <col>1</col>
      <legend>ON</legend>
      <enable>
        <not><property>/fdm/jsbsim/systems/electrical/GEN-2-switch</property></not>
      </enable>
      <binding>
        <command>property-assign</command>
        <property>/fdm/jsbsim/systems/electrical/GEN-2-switch</property>
        <value>1</value>
      </binding>
    </button>

    <button>
      <row>0</row>
      <col>2</col>
      <legend>FIXED FREQ RESET</legend>
      <binding>
        <command>nasal</command>
        <script>
          # Maybe there is a better way to do this? IDK
          setprop("/fdm/jsbsim/systems/electrical/GEN-3-reset", 1);
          settimer(func setprop("/fdm/jsbsim/systems/electrical/GEN-3-reset", 0), 1);
        </script>
      </binding>
    </button>

    <button>
      <row>1</row>
      <col>0</col>
      <legend>OFF/RESET</legend>
      <enable>
        <property>/fdm/jsbsim/systems/electrical/GEN-1-switch</property>
      </enable>
      <binding>
        <command>property-assign</command>
        <property>/fdm/jsbsim/systems/electrical/GEN-1-switch</property>
        <value>0</value>
      </binding>
    </button>

    <button>
      <row>1</row>
      <col>1</col>
      <legend>OFF/RESET</legend>
      <enable>
        <property>/fdm/jsbsim/systems/electrical/GEN-2-switch</property>
      </enable>
      <binding>
        <command>property-assign</command>
        <property>/fdm/jsbsim/systems/electrical/GEN-2-switch</property>
        <value>0</value>
      </binding>
    </button>

    <button>
      <row>1</row>
      <col>2</col>
      <legend>RAM AIR TURBINE</legend>
      <enable>
        <not><property>/fdm/jsbsim/systems/electrical/RAT-extended</property></not>
      </enable>
      <binding>
        <command>property-assign</command>
        <property>/fdm/jsbsim/systems/electrical/RAT-extended</property>
        <value>1</value>
      </binding>
    </button>

    <text>
      <row>2</row>
      <col>0</col>
      <label>GEN. No. 1</label>
    </text>

    <text>
      <row>2</row>
      <col>1</col>
      <label>GEN. No. 2</label>
    </text>
  </group>


  <hrule/>


  <!-- Close dialog button -->
  <button>
    <pref-width>90</pref-width>
    <pref-height>30</pref-height>
    <legend>Close</legend>
    <keynum>27</keynum>
    <binding>
      <command>dialog-close</command>
    </binding>
    <binding>
      <command>dialog-apply</command>
    </binding>
  </button>

  <empty><stretch>true</stretch></empty>

</PropertyList>
