<?xml version="1.0"?>

<flight_control name="FCS">

  <channel name="Pitch">

   <summer name="Pitch Trim Sum">
      <input>fcs/elevator-cmd-norm</input>
      <input>fcs/pitch-trim-cmd-norm</input>
      <clipto>
        <min> -1 </min>
        <max>  1 </max>
      </clipto>
   </summer>

   <aerosurface_scale name="Elevator Control">
      <input>fcs/pitch-trim-sum</input>
      <range>
        <min> -0.35 </min>
        <max>  0.30 </max>
      </range>
      <output>fcs/elevator-pos-rad</output>
   </aerosurface_scale>

   <aerosurface_scale name="Elevator Normalized">
      <input>fcs/elevator-pos-rad</input>
      <domain>
        <min>-0.35</min>
        <max> 0.30</max>
      </domain>
      <range>
        <min>-1</min>
        <max> 1</max>
      </range>
      <output>fcs/elevator-pos-norm</output>
   </aerosurface_scale>

  </channel>


  <channel name="Roll">

   <summer name="Roll Trim Sum">
      <input>fcs/aileron-cmd-norm</input>
      <input>fcs/roll-trim-cmd-norm</input>
      <clipto>
        <min> -1 </min>
        <max>  1 </max>
      </clipto>
   </summer>

   <fcs_function name="Aileron Limit">
     <function>
       <table>
         <independentVar>gear/gear-pos-norm</independentVar>
         <tableData>
           0 10
           1 20
         </tableData>
       </table>
     </function>
     <output>fcs/aileron-limit-deg</output>
   </fcs_function>
   

<!--left aileron-->

   <aerosurface_scale name="Left Aileron Control">
      <input>fcs/roll-trim-sum</input>
      <range>
        <min> -20 </min>
        <max>  20 </max>
      </range>
      <clipto>
        <min>-fcs/aileron-limit-deg</min>
        <max>fcs/aileron-limit-deg</max>
      </clipto>
      <output>fcs/left-aileron-pos-deg</output>
   </aerosurface_scale>


   <aerosurface_scale name="Left Aileron Normalized">
      <input>fcs/left-aileron-pos-deg</input>
      <domain>
        <min> -20 </min>
        <max>  20 </max>
      </domain>
      <range>
        <min> -1 </min>
        <max>  1 </max>
      </range>
      <output>fcs/left-aileron-pos-norm</output>
   </aerosurface_scale>

<!--right aileron-->

   <aerosurface_scale name="Right Aileron Control">
      <input>fcs/roll-trim-sum</input>
      <range>
        <min> -20 </min>
        <max>  20 </max>
      </range>
      <clipto>
        <min>-fcs/aileron-limit-deg</min>
        <max>fcs/aileron-limit-deg</max>
      </clipto>
      <output>fcs/right-aileron-pos-deg</output>
   </aerosurface_scale>

   <aerosurface_scale name="Right Aileron Normalized">
      <input>fcs/right-aileron-pos-deg</input>
      <domain>
        <min> -20 </min>
        <max>  20 </max>
      </domain>
      <range>
        <min> -1 </min>
        <max>  1 </max>
      </range>
      <output>fcs/right-aileron-pos-norm</output>
   </aerosurface_scale>

  </channel>


  <channel name="Yaw">

   <summer name="Rudder Command Sum">
      <input>fcs/rudder-cmd-norm</input>
      <input>fcs/yaw-trim-cmd-norm</input>
      <clipto>
        <min> -1.0 </min>
        <max>  1.0 </max>
      </clipto>
   </summer>

<!--yaw damper-->

   <scheduled_gain name="Yaw Damper Rate">
      <input>velocities/r-aero-rad_sec</input>
      <table>
        <independentVar lookup="row">velocities/ve-kts</independentVar>
         <tableData>
            30     0.00
            60     2.00
         </tableData>
      </table>
   </scheduled_gain>

   <scheduled_gain name="Yaw Damper Beta">
      <input>aero/beta-rad</input>
      <table>
        <independentVar lookup="row">velocities/ve-kts</independentVar>
        <tableData>
           30     0.00
           60     0.00
        </tableData>
      </table>
   </scheduled_gain>

   <summer name="Yaw Damper Sum">
      <input>fcs/yaw-damper-beta</input>
      <input>fcs/yaw-damper-rate</input>
      <clipto>
        <min> -0.1 </min>
        <max>  0.1 </max>
      </clipto>
   </summer>

   <scheduled_gain name="Yaw Damper Final">
      <input>fcs/yaw-damper-sum</input>
      <table>
        <independentVar lookup="row">velocities/ve-kts</independentVar>
        <tableData>
           30         0.0
           31         1.0
        </tableData>
      </table>
   </scheduled_gain>

<!--rudder-->

   <summer name="Rudder Sum">
      <input>fcs/rudder-command-sum</input>
      <input>fcs/yaw-damper-final</input>
      <clipto>
        <min> -1 </min>
        <max>  1 </max>
      </clipto>
   </summer>

   <aerosurface_scale name="Rudder Control">
      <input>fcs/rudder-sum</input>
      <domain>
        <min>-1.0</min>
        <max> 1.0</max>
      </domain>
      <range>
        <min> -0.25 </min>
        <max>  0.25 </max>
      </range>
      <output>fcs/rudder-pos-rad</output>
   </aerosurface_scale>

	<scheduled_gain name="Rudder Scheduled Gain">
		<input>fcs/rudder-pos-rad</input>
		<table>
			<independentVar>gear/gear-cmd-norm</independentVar>
			<tableData>
			0.0   0.4615
			1.0   1.0
			</tableData>
		</table>
	</scheduled_gain>

   <aerosurface_scale name="Rudder Normalized">
      <input>fcs/rudder-pos-rad</input>
      <domain>
        <min>-0.25</min>
        <max> 0.25</max>
      </domain>
      <range>
        <min>-1</min>
        <max> 1</max>
      </range>
      <output>fcs/rudder-pos-norm</output>
   </aerosurface_scale>

  </channel>

</flight_control>